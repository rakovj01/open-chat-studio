# Generated by Django 4.2 on 2023-10-24 12:01

from django.db import migrations


def migrate_llm_providers(apps, schema_editor):
    LlmProvider = apps.get_model("service_providers", "LlmProvider")
    Experiment = apps.get_model("experiments", "Experiment")

    for experiment in Experiment.objects.filter(llm_provider__isnull=False):
        experiment.llm_provider_new_id = LlmProvider.objects.filter(old_id=experiment.llm_provider_id).first().id
        experiment.save()


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        ("service_providers", "0002_copy_llm_providers"),
        ("experiments", "0048_experiment_llm_provider_new"),
    ]

    operations = [
        migrations.RunPython(migrate_llm_providers, elidable=True)
    ]
